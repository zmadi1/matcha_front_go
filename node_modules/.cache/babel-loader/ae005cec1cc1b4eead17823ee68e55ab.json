{"remainingRequest":"/home/zakhele/go/src/github.com/gmohlamo/matcha-front/node_modules/babel-loader/lib/index.js!/home/zakhele/go/src/github.com/gmohlamo/matcha-front/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/zakhele/go/src/github.com/gmohlamo/matcha-front/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/zakhele/go/src/github.com/gmohlamo/matcha-front/src/App.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/zakhele/go/src/github.com/gmohlamo/matcha-front/src/App.vue","mtime":1578643202699},{"path":"/home/zakhele/go/src/github.com/gmohlamo/matcha-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/zakhele/go/src/github.com/gmohlamo/matcha-front/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/zakhele/go/src/github.com/gmohlamo/matcha-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/zakhele/go/src/github.com/gmohlamo/matcha-front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.regexp.split\";\nimport _objectSpread from \"/home/zakhele/go/src/github.com/gmohlamo/matcha-front/node_modules/@babel/runtime-corejs2/helpers/esm/objectSpread\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { mapState, mapMutations } from 'vuex';\nimport axios from 'axios';\nexport default {\n  name: 'app',\n  data: function data() {\n    return {};\n  },\n  computed: _objectSpread({}, mapState(['loggedIn'])),\n  methods: _objectSpread({}, mapMutations(['addCoords', 'logOut', 'userAuth', 'getUserData']), {\n    logUserOut: function logUserOut() {\n      this.logOut();\n      location.href = location.protocol + '//' + location.host + '/#/auth';\n    }\n  }),\n  mounted: function mounted() {\n    var _this = this;\n\n    fetch('https://ipinfo.io/json').then(function (res) {\n      return res.json();\n    }).then(function (myJson) {\n      console.log(myJson);\n\n      try {\n        _this.addCoords(myJson.loc.split(',').map(Number).reverse());\n      } catch (error) {\n        console.log(\"Failed to get ip address geolocation\");\n      }\n\n      if (_this.loggedIn == false) {\n        location.href = location.protocol + '//' + location.host + '/#/auth';\n      }\n    }).catch(function (err) {\n      return console.log(err);\n    });\n\n    if (this.loggedIn == false) {\n      if (localStorage.token == \"\") {\n        location.href = location.protocol + '//' + location.host + '/#/auth';\n        return;\n      } else {\n        axios.defaults.headers.common[\"Authorization\"] = localStorage.token;\n        axios.get(\"http://localhost:4040/users/check\").then(function (resp) {\n          return resp.data;\n        }).then(function (data) {\n          if (data.success) {\n            _this.userAuth();\n\n            _this.getUserData();\n\n            location.href = location.protocol + '//' + location.host + '/#/';\n          }\n        });\n      }\n    }\n  }\n};",{"version":3,"sources":["App.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0BA,SAAA,QAAA,EAAA,YAAA,QAAA,MAAA;AACA,OAAA,KAAA,MAAA,OAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,KADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA,EAAA;AAEA,GALA;AAMA,EAAA,QAAA,oBACA,QAAA,CAAA,CACA,UADA,CAAA,CADA,CANA;AAWA,EAAA,OAAA,oBACA,YAAA,CAAA,CACA,WADA,EAEA,QAFA,EAGA,UAHA,EAIA,aAJA,CAAA,CADA;AAOA,IAAA,UAPA,wBAOA;AACA,WAAA,MAAA;AACA,MAAA,QAAA,CAAA,IAAA,GAAA,QAAA,CAAA,QAAA,GAAA,IAAA,GAAA,QAAA,CAAA,IAAA,GAAA,SAAA;AACA;AAVA,IAXA;AAuBA,EAAA,OAAA,EAAA,mBAAA;AAAA;;AACA,IAAA,KAAA,CAAA,wBAAA,CAAA,CACA,IADA,CACA,UAAA,GAAA,EAAA;AAAA,aAAA,GAAA,CAAA,IAAA,EAAA;AAAA,KADA,EAEA,IAFA,CAEA,UAAA,MAAA,EAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,MAAA;;AACA,UAAA;AACA,QAAA,KAAA,CAAA,SAAA,CAAA,MAAA,CAAA,GAAA,CAAA,KAAA,CAAA,GAAA,EAAA,GAAA,CAAA,MAAA,EAAA,OAAA,EAAA;AACA,OAFA,CAGA,OAAA,KAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,sCAAA;AACA;;AACA,UAAA,KAAA,CAAA,QAAA,IAAA,KAAA,EAAA;AACA,QAAA,QAAA,CAAA,IAAA,GAAA,QAAA,CAAA,QAAA,GAAA,IAAA,GAAA,QAAA,CAAA,IAAA,GAAA,SAAA;AACA;AACA,KAbA,EAaA,KAbA,CAaA,UAAA,GAAA;AAAA,aAAA,OAAA,CAAA,GAAA,CAAA,GAAA,CAAA;AAAA,KAbA;;AAcA,QAAA,KAAA,QAAA,IAAA,KAAA,EAAA;AACA,UAAA,YAAA,CAAA,KAAA,IAAA,EAAA,EAAA;AACA,QAAA,QAAA,CAAA,IAAA,GAAA,QAAA,CAAA,QAAA,GAAA,IAAA,GAAA,QAAA,CAAA,IAAA,GAAA,SAAA;AACA;AACA,OAHA,MAGA;AACA,QAAA,KAAA,CAAA,QAAA,CAAA,OAAA,CAAA,MAAA,CAAA,eAAA,IAAA,YAAA,CAAA,KAAA;AACA,QAAA,KAAA,CAAA,GAAA,CAAA,mCAAA,EACA,IADA,CACA,UAAA,IAAA,EAAA;AACA,iBAAA,IAAA,CAAA,IAAA;AACA,SAHA,EAIA,IAJA,CAIA,UAAA,IAAA,EAAA;AACA,cAAA,IAAA,CAAA,OAAA,EAAA;AACA,YAAA,KAAA,CAAA,QAAA;;AACA,YAAA,KAAA,CAAA,WAAA;;AACA,YAAA,QAAA,CAAA,IAAA,GAAA,QAAA,CAAA,QAAA,GAAA,IAAA,GAAA,QAAA,CAAA,IAAA,GAAA,KAAA;AACA;AACA,SAVA;AAWA;AACA;AACA;AAzDA,CAAA","sourcesContent":["<template>\n  <div id=\"app\">\n    <nav class=\"navbar\" role=\"navigation\" aria-label=\"main navigation\">\n      <div class=\"navbar-brand\">\n        <a role=\"button\" class=\"navbar-burger burger\" aria-label=\"menu\" aria-expanded=\"false\">\n          <span aria-hidden=\"true\"></span>\n          <span aria-hidden=\"true\"></span>\n          <span aria-hidden=\"true\"></span>\n        </a>\n      </div>\n      <div class=\"navbar-menu\">\n        <div class=\"navbar-start\">\n          <router-link class=\"navbar-item\" to=\"/\" v-if=\"loggedIn\">Home</router-link>\n          <router-link class=\"navbar-item\" to=\"/auth\" v-if=\"!loggedIn\">Auth</router-link>\n          <router-link class=\"navbar-item\" to=\"/profile\" v-if=\"loggedIn\">Profile</router-link>\n        </div>\n        <div class=\"navbar-end\">\n          <a class=\"navbar-item\" v-if=\"loggedIn\" v-on:click=\"logUserOut()\">Logout</a>\n        </div>\n      </div>\n    </nav>\n    <router-view/>\n  </div>\n</template>\n\n<script>\nimport { mapState, mapMutations } from 'vuex'\nimport axios from 'axios'\n\nexport default {\n  name: 'app',\n  data(){\n    return {\n    }\n  },\n  computed: {\n    ...mapState([\n      'loggedIn'\n    ])\n  },\n  methods: {\n    ...mapMutations([\n      'addCoords',\n      'logOut',\n      'userAuth',\n      'getUserData'\n    ]),\n    logUserOut(){\n      this.logOut()\n      location.href = location.protocol + '//' + location.host + '/#/auth'\n    }\n  },\n  mounted: function() {\n    fetch('https://ipinfo.io/json')\n    .then(res => {return res.json()})\n    .then(myJson => {\n      console.log(myJson)\n      try {\n        this.addCoords(myJson.loc.split(',').map(Number).reverse())\n\t  }\n      catch(error) {\n\t    console.log(\"Failed to get ip address geolocation\")\n\t  }\n      if (this.loggedIn == false) {\n        location.href = location.protocol + '//' + location.host + '/#/auth'\n      }\n    }).catch(err => console.log(err))\n    if (this.loggedIn == false) {\n      if (localStorage.token == \"\") {\n        location.href = location.protocol + '//' + location.host + '/#/auth'\n        return\n      } else {\n        axios.defaults.headers.common[\"Authorization\"] = localStorage.token\n        axios.get(\"http://localhost:4040/users/check\")\n        .then(resp => {\n          return resp.data\n        })\n        .then(data => {\n          if (data.success) {\n            this.userAuth()\n            this.getUserData()\n            location.href = location.protocol + '//' + location.host + '/#/'\n          }\n        })\n      }\n    }\n  }\n}\n</script>\n\n<style>\nbody {\n  padding: 0px;\n  border: 0px;\n}\n</style>\n"],"sourceRoot":"src"}]}